
/**
 * -*- C++ -*-
 * -------------------------------------------------------------------------------
 * - ¤q⌒r q⌒r		               serialize2.h,v 1.0 2005/03/29 15:41:34
 *  u qq ⌒r
 * 蛱铴蛱锾| t------
 * -------------------------------------------------------------------------------
 */

#ifndef _serialize2_H_
#define _serialize2_H_

#if !defined (BOE_LACKS_PRAGMA_ONCE)
# pragma once
#endif /* BOE_LACKS_PRAGMA_ONCE */

#include "util/tstring.h"
#include <list>
#include <map>
#include <vector>
#include <set>
#include "config.h"

_bt_begin

class string_helper_base2
{
public:
	virtual ~string_helper_base2(){}
	virtual void append(const char* src) = 0;
	virtual void append(const tstring& src)
	{
		append( src.c_str() );
	}
	virtual void clear() = 0;
	virtual void operator=(const tchar* src )
	{
		clear();
		append( src );
	}

	virtual void operator=(const tstring& src )
	{
		clear();
		append( src );
	}
};

class serialize_ostream_base
{
public:
	virtual ~serialize_ostream_base() {}
	virtual bool open(const tchar* ClassName) = 0;
	virtual bool open(const tchar* ClassName, const size_t& size) = 0;//注意：如果流不支持size,请勿赋值
	virtual bool close(const tchar* ClassName) = 0;
	virtual bool write(const bool& t, const tchar* fieldname = "bool") = 0;
	virtual bool write(const char& t, const tchar* fieldname = "char") = 0;
	virtual bool write(const short& t, const tchar* fieldname = "short") = 0;
	virtual bool write(const int& t, const tchar* fieldname = "int") = 0;
	virtual bool write(const long& t, const tchar* fieldname = "long") = 0;
	virtual bool write(const __int64& t, const tchar* fieldname = "__int64") = 0;
	virtual bool write(const unsigned char& t, const tchar* fieldname = "unsignedchar") = 0;
	virtual bool write(const unsigned short& t, const tchar* fieldname = "unsingedshort") = 0;
	virtual bool write(const unsigned int& t, const tchar* fieldname = "unsignedint") = 0;
	virtual bool write(const unsigned long& t, const tchar* fieldname = "unsignedlong") = 0;
	virtual bool write(const unsigned __int64& t, const tchar* fieldname = "unsigned__int64") = 0;
	virtual bool write(const  double& t, const tchar* fieldname = "double") = 0;
	virtual bool write(const float& t, const tchar* fieldname = "float") = 0;
	virtual bool write(const tstring& t, const tchar* fieldname = "string") = 0;
};

class serialize_istream_base
{
public:
	virtual ~serialize_istream_base() {}
	virtual bool open(const tchar* ClassName) = 0;
	virtual bool open(const tchar* ClassName, size_t& size) = 0;
	virtual bool close(const tchar* ClassName) = 0;
	virtual bool read( bool& t, const tchar* fieldname = "bool") = 0;
	virtual bool read( char& t, const tchar* fieldname = "char") = 0;
	virtual bool read( short& t, const tchar* fieldname = "short") = 0;
	virtual bool read( int& t, const tchar* fieldname = "int") = 0;
	virtual bool read( long& t, const tchar* fieldname = "long") = 0;
	virtual bool read( __int64& t, const tchar* fieldname = "__int64") = 0;
	virtual bool read( unsigned char& t, const tchar* fieldname = "unsignedchar") = 0;
	virtual bool read( unsigned short& t, const tchar* fieldname = "unsingedshort") = 0;
	virtual bool read( unsigned int& t, const tchar* fieldname = "unsignedint") = 0;
	virtual bool read( unsigned long& t, const tchar* fieldname = "unsignedlong") = 0;
	virtual bool read( unsigned __int64& t, const tchar* fieldname = "unsigned__int64") = 0;
	virtual bool read( double& t, const tchar* fieldname = "double") = 0;
	virtual bool read( float& t, const tchar* fieldname = "float") = 0;
	virtual bool read( tstring& t, const tchar* fieldname = "string") = 0;
	virtual bool read( string_helper_base2& t, const tchar* fieldname = "string") = 0;
};


bool inline serialize(const bool& t, _bt serialize_ostream_base& stream, const tchar* name="bool")
{
	return stream.write(t,name);
}
bool inline serialize(const char& t, _bt serialize_ostream_base& stream, const tchar* name="char")
{
	return stream.write(t,name);
}
bool inline serialize(const short& t, _bt serialize_ostream_base& stream, const tchar* name="short")
{
	return stream.write(t,name);
}
bool inline serialize(const int& t, _bt serialize_ostream_base& stream, const tchar* name="int")
{
	return stream.write(t,name);
}
bool inline serialize(const long& t, _bt serialize_ostream_base& stream, const tchar* name="long")
{
	return stream.write(t,name);
}
bool inline serialize(const __int64& t, _bt serialize_ostream_base& stream, const tchar* name="__int64")
{
	return stream.write(t,name);
}
//bool inline serialize(const time_t& t, _bt serialize_ostream_base& stream, const tchar* name="time_t")
//{
//	return stream.write(( __int64 )t,name);
//}
bool inline serialize(const unsigned char& t, _bt serialize_ostream_base& stream, const tchar* name="unsingedchar")
{
	return stream.write(t,name);
}
bool inline serialize(const unsigned short& t, _bt serialize_ostream_base& stream, const tchar* name="unsignedshort")
{
	return stream.write(t,name);
}
bool inline serialize(const unsigned int& t, _bt serialize_ostream_base& stream, const tchar* name="unsignedint")
{
	return stream.write(t,name);
}
bool inline serialize(const unsigned long& t, _bt serialize_ostream_base& stream, const tchar* name="unsignedlong")
{
	return stream.write(t,name);
}
bool inline serialize(const unsigned __int64& t, _bt serialize_ostream_base& stream, const tchar* name="unsigned__int64")
{
	return stream.write(t,name);
}
bool inline serialize(const double& t, _bt serialize_ostream_base& stream, const tchar* name="double")
{
	return stream.write(t,name);
}
bool inline serialize(const float& t, _bt serialize_ostream_base& stream, const tchar* name="float")
{
	return stream.write(t,name);
}
bool inline serialize(const tstring& t, _bt serialize_ostream_base& stream, const tchar* name="string")
{
	return stream.write(t,name);
}





class string_helper2 : public string_helper_base2
{
private:
	tstring& dest_;
public:
	string_helper2( tstring& dest ):dest_(dest){}
	virtual void append(const tchar* src)
	{
		dest_.append(src);
	}
	virtual void clear()
	{
		dest_.clear();
	}
};


class Data_Base_I
{
protected:
	virtual ~Data_Base_I(){}
	 virtual bool write(serialize_ostream_base& strm, const bool flag = true, const tchar* name="ISerialize_base") const = 0;
	 virtual bool read(serialize_istream_base& strm, const bool flag = true, const tchar* name="ISerialize_base") = 0;
	 friend  bool serialize(const Data_Base_I& s1, _bt serialize_ostream_base& strm, const tchar* name);
	 friend  bool deserialize(Data_Base_I& s1, _bt serialize_istream_base& strm, const tchar* name); 
};
bool inline serialize(const Data_Base_I& s1, _bt serialize_ostream_base& strm, const tchar* name="ISerialize_base")
{
	return s1.write(strm, true, name);
}
bool inline deserialize(Data_Base_I& s1, _bt serialize_istream_base& strm, const tchar* name="ISerialize_base")
{
	return s1.read(strm, true, name);
}

class IData_base : public Data_Base_I
{
protected:
	virtual ~IData_base(){}
	 virtual bool write(serialize_ostream_base& strm, const bool flag = true, const tchar* name="ISerialize_base") const = 0;
	 virtual bool read(serialize_istream_base& strm, const bool flag = true, const tchar* name="ISerialize_base") = 0;
	 friend  bool serialize(const IData_base& s1, _bt serialize_ostream_base& strm, const tchar* name);
	 friend  bool deserialize(IData_base& s1, _bt serialize_istream_base& strm, const tchar* name); 
};
bool inline IData_base::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const
{
	return true;
}
bool inline IData_base::read(serialize_istream_base& strm, const bool flag , const tchar* name) 
{
	return true;
}
bool inline serialize(const IData_base& s1, _bt serialize_ostream_base& strm, const tchar* name="ISerialize")
{
	return s1.write(strm, true, name);
}
bool inline deserialize(IData_base& s1, _bt serialize_istream_base& strm, const tchar* name="ISerialize")
{
	return s1.read(strm, true, name);
}

//反序列化基础函数

//stream.read(val,name)

bool inline deserialize( bool& t, _bt serialize_istream_base& stream, const tchar* name="bool")
{
	return stream.read(t,name);
}
bool inline deserialize( char& t, _bt serialize_istream_base& stream, const tchar* name="char")
{
	return stream.read(t,name);
}
bool inline deserialize( short& t, _bt serialize_istream_base& stream, const tchar* name="short")
{
	return stream.read(t,name);
}
bool inline deserialize( int& t, _bt serialize_istream_base& stream, const tchar* name="int")
{
	return stream.read(t,name);
}
bool inline deserialize( long& t, _bt serialize_istream_base& stream, const tchar* name="long")
{
	return stream.read(t,name);
}
bool inline deserialize( __int64& t, _bt serialize_istream_base& stream, const tchar* name="__int64")
{
	return stream.read(t,name);
}
//bool inline deserialize( time_t& t, _bt serialize_istream_base& stream, const tchar* name="__int64")
//{
//	__int64 tt = 0;
//	if ( ! stream.read( t,name) )
//		return false;
//	t = ( time_t )t;
//	return true;
//}
bool inline deserialize( unsigned char& t, _bt serialize_istream_base& stream, const tchar* name="unsignedchar")
{
	return stream.read(t,name);
}
bool inline deserialize( unsigned short& t, _bt serialize_istream_base& stream, const tchar* name="unsignedshort")
{
	return stream.read(t,name);
}
bool inline deserialize( unsigned int& t, _bt serialize_istream_base& stream, const tchar* name="unsignedint")
{
	return stream.read(t,name);
}

bool inline deserialize( unsigned long& t, _bt serialize_istream_base& stream, const tchar* name="unsignedlong")
{
	return stream.read(t,name);
}
bool inline deserialize( unsigned __int64& t, _bt serialize_istream_base& stream, const tchar* name="unsigned__int64")
{
	return stream.read(t,name);
}
bool inline deserialize( double& t, _bt serialize_istream_base& stream, const tchar* name="double")
{
	return stream.read(t,name);
}
bool inline deserialize( float& t, _bt serialize_istream_base& stream, const tchar* name="float")
{
	return stream.read(t,name);
}
bool inline deserialize( tstring& t, _bt serialize_istream_base& stream, const tchar* name="string")
{
	string_helper2 sh(t);
	return stream.read(sh,name);
}

template< typename T>
bool inline serialize( const std::auto_ptr<T>& ptr_, _bt serialize_ostream_base& stream, const tchar* name = "auto_ptr")
{
	return serialize( *ptr_, stream,name);
}

template< typename T1, typename T2>
bool inline serialize( const std::pair<T1,T2>& pair_, _bt serialize_ostream_base& stream, const tchar* name = "pair")
{
	return serialize( pair_.second, stream,name );
}
template< typename _Init>
bool inline serialize( _Init _F, _Init _E, _bt serialize_ostream_base& stream, const size_t& size = -1, const tchar* name = "array")
{
	size_t sz = size;
	if ( -1 == sz )
		sz  = std::distance( _F, _E );

	bool ret = false;
	if ( ret=stream.open(name, sz) )
	{
		for(;_F!=_E && (ret=serialize( *_F, stream ));_F++);			
		if ( ret ) ret = stream.close(name);
	}
	return ret;
}


template< typename T1, typename T2 >
bool inline serialize( const std::list< T1,T2 >& list_ , _bt serialize_ostream_base& stream, const tchar* name = "list" )
{
	return serialize(list_.begin(), list_.end(), stream, list_.size(),  name);
}
template< typename T1, typename T2 >
bool inline serialize( const std::vector< T1,T2 >& vector_ , _bt serialize_ostream_base& stream, const tchar* name ="vector" )
{
	return serialize(vector_.begin(), vector_.end(), stream, vector_.size(), name );
}
template< typename T1, typename T2, typename T3 >
bool inline serialize( const std::set< T1, T2, T3 >& set_ , _bt serialize_ostream_base& stream, const tchar* name ="set" )
{
	return serialize(set_.begin(), set_.end(), stream, set_.size(), name );
}

template< typename T1, typename T2, typename T3, typename T4 >
bool inline serialize( const std::map< T1, T2, T3, T4 >& map_ , _bt serialize_ostream_base& stream, const tchar* name ="map" )
{
	return serialize(map_.begin(), map_.end(), stream, map_.size(), name );
}
template< typename T1, typename T2, typename T3, typename T4 >
bool inline serialize( const std::multimap< T1, T2, T3, T4 >& map_ , _bt serialize_ostream_base& stream, const tchar* name ="map" )
{
	return serialize(map_.begin(), map_.end(), stream, map_.size(), name );
}

template< typename T>
bool inline deserialize( std::auto_ptr<T>& ptr_, _bt serialize_istream_base& stream, const tchar* name = "auto_ptr")
{
	if( ptr.get() == 0 )
		ptr_.reset( new T() );
	return deserialize( *ptr_, stream,name);
}

template< typename T1, typename T2 >
bool inline deserialize( std::list< T1,T2 >& list_ , _bt serialize_istream_base& stream, const tchar* name = "list" )
{
	bool ret = false;
	size_t size = -1;


	if ( ret=stream.open(name, size) )
	{
		list_.clear();

		while( ret && (size==-1|| list_.size()<size) )
		{
			std::list< T1,T2 >::value_type val;//std::list< T1,T2 >::iterator it = list_.insert(list.end(), std::list< T1,T2 >::value_type());
			if ( ret=deserialize(val, stream) )
				list_.push_back(val);	

		};

		//可能某些流如xml等不支持size,
		//如果 支持size：必须读取相应size个且能close,才为成功
		//如果不支持size：必须要能close为成功

		ret = (  size==-1 || list_.size()==size  ) && stream.close(name)  ;
	}
	return ret;
}
template< typename T1, typename T2 >
bool inline deserialize( std::vector< T1,T2 >& vector_ , _bt serialize_istream_base& stream, const tchar* name ="vector" )
{
	bool ret = false;
	size_t size = -1;
	if ( ret=stream.open(name, size) )
	{
		vector_.clear();
		if ( size != -1 ) vector_.reserve( size );
		while( ret && (size==-1|| vector_.size()<size) )
		{
			std::vector< T1,T2 >::value_type val;//std::vector< T1,T2 >::iterator it = vector_.insert(vector_.end(), std::vector< T1,T2 >::value_type());
			if ( ret=deserialize(val, stream) )
				vector_.push_back(val);	
		};

		//可能某些流如xml等不支持size,
		//如果 支持size：必须读取相应size个且能close,才为成功
		//如果不支持size：必须要能close为成功

		ret = (  size==-1 || vector_.size()==size  ) && stream.close(name)  ;		

	}
	return ret;
}
template< typename T1, typename T2, typename T3 >
bool inline deserialize( std::set< T1, T2, T3 >& set_ , _bt serialize_istream_base& stream, const tchar* name ="set" )
{
	bool ret = false;
	size_t size = -1;
	if ( ret=stream.open(name, size) )
	{
		set_.clear();
		while(ret && (size==-1|| set_.size()<size) )
		{
			std::set< T1, T2, T3 >::value_type val;
			if ( ret=deserialize(val, stream) )
				set_.insert(val);	
		};
		

		//可能某些流如xml等不支持size,
		//如果 支持size：必须读取相应size个且能close,才为成功
		//如果不支持size：必须要能close为成功

		ret = (  size==-1 || set_.size()==size  ) && stream.close(name)  ;
	}
	return ret;	
	//return serialize(set_.begin(), set_.end(), stream, set_.size(), name );
}

template< typename T1, typename T2, typename T3, typename T4 >
bool inline deserialize( std::map< T1, T2, T3, T4 >& map_ , _bt serialize_istream_base& stream, const tchar* name ="map" )
{
	bool ret = false;
	size_t size = -1;
	if ( ret=stream.open(name, size) )
	{
		map_.clear();
		while( ret &&(size==-1|| map_.size()<size) )
		{
			std::map< T1, T2, T3, T4 >::key_type  key;
			std::map< T1, T2, T3, T4 >::referent_type  val;
			if ( ret=(deserialize(val, stream) && deserialize_getkey( key, (const std::map< T1, T2, T3, T4 >::referent_type)val )) )
				map_.insert( std::map< T1, T2, T3, T4 >::value_type(key, val));	
		};

		//可能某些流如xml等不支持size,
		//如果 支持size：必须读取相应size个且能close,才为成功
		//如果不支持size：必须要能close为成功

		ret = (  size==-1 || map_.size()==size  ) && stream.close(name)  ;
	}
	return ret;	
	//return serialize(map_.begin(), map_.end(), stream, map_.size(), name );
}
template< typename T1, typename T2, typename T3, typename T4 >
bool inline deserialize( std::multimap< T1, T2, T3, T4 >& map_ , _bt serialize_istream_base& stream, const tchar* name ="map" )
{
	bool ret = false;
	size_t size = -1;
	if ( ret=stream.open(name, size) )
	{
		map_.clear();
		while( ret && (size==-1|| map_.size()<size) )
		{
			std::multimap< T1, T2, T3, T4 >::key_type  key;
			std::multimap< T1, T2, T3, T4 >::referent_type  val;
			if ( ret=(deserialize(val, stream) && deserialize_getkey( key, (const std::multimap< T1, T2, T3, T4 >::referent_type)val )) )
				map_.insert( std::map< T1, T2, T3, T4 >::value_type(key, val));	

			//std::multimap< T1, T2, T3, T4 >::value_type  val;
			//if ( ret=deserialize(val, stream) )
			//	map_.insert(val);	
		};

		//可能某些流如xml等不支持size,
		//如果 支持size：必须读取相应size个且能close,才为成功
		//如果不支持size：必须要能close为成功

		ret = (  size==-1 || map_.size()==size  ) && stream.close(name)  ;
	}
	return ret;	
}


_bt_end




#define register_serialize2_v1_1(Struct,\
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_1(Struct,\
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_1(class_, base_, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_1(class_, base_, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_2(Struct,\
                                     member1, member_type1, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_2(Struct,\
                                     member1, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_2(class_, base_, \
                                     member1, member_type1, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_2(class_, base_, \
                                     member1, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_3(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_3(Struct,\
                                     member1, \
                                     member2, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_3(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_3(class_, base_, \
                                     member1, \
                                     member2, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_4(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_4(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_4(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_4(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_5(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_5(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_5(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_5(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_6(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_6(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_6(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_6(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_7(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_7(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_7(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_7(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_8(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_8(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_8(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_8(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_9(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_9(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_9(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_9(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_10(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_10(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_10(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_10(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_11(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_11(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_11(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_11(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_12(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_12(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_12(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_12(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_13(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_13(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_13(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_13(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_14(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_14(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_14(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_14(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_15(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_15(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_15(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_15(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_16(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_16(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_16(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_16(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_17(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_17(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_17(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_17(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_18(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_18(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_18(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_18(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_19(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_19(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_19(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_19(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_20(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_20(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_20(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_20(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_21(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_21(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_21(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_21(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_22(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_22(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_22(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_22(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_23(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_23(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_23(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_23(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_24(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_24(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_24(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_24(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_25(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_25(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_25(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_25(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_26(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_26(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_26(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_26(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_27(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_27(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_27(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_27(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_28(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_28(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_28(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_28(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_29(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_29(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_29(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_29(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}





#define register_serialize2_v1_30(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_30(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_30(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_30(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_31(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_31(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_31(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_31(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_32(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_32(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_32(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_32(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_33(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_33(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_33(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_33(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_34(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_34(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_34(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_34(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_35(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_35(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_35(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_35(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_36(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_36(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_36(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_36(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_37(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_37(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_37(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_37(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_38(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_38(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_38(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_38(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_39(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_39(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_39(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_39(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_40(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_40(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_40(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_40(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_41(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_41(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_41(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_41(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_42(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_42(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_42(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_42(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_43(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_43(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_43(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_43(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_44(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_44(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_44(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_44(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_45(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_45(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_45(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_45(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_46(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_46(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_46(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_46(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_47(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_47(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_47(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_47(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_48(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_48(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_48(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_48(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_49(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_49(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_49(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_49(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_50(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_50(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_50(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_50(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_51(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_51(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_51(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_51(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_52(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_52(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_52(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_52(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_53(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_53(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_53(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_53(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_54(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_54(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_54(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_54(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_55(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_55(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_55(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_type54(member54,strm, #member54) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_type54(member54,strm, #member54) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_55(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(member54,strm, #member54) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(member54,strm, #member54) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_56(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_type55(s1.##member55,strm, #member55) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_type55(s1.##member55,strm, #member55) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_56(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##member55,strm, #member55) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##member55,strm, #member55) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_56(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_type54(member54,strm, #member54) && \
        serialize_##member_type55(member55,strm, #member55) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_type54(member54,strm, #member54) && \
		 deserialize_##member_type55(member55,strm, #member55) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_56(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(member54,strm, #member54) && \
		 serialize(member55,strm, #member55) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(member54,strm, #member54) && \
		 deserialize(member55,strm, #member55) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_57(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_type55(s1.##member55,strm, #member55) && \
        serialize_##member_type56(s1.##member56,strm, #member56) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_type55(s1.##member55,strm, #member55) && \
		 deserialize_##member_type56(s1.##member56,strm, #member56) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_57(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##member55,strm, #member55) && \
		 serialize(s1.##member56,strm, #member56) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##member55,strm, #member55) && \
		 deserialize(s1.##member56,strm, #member56) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_57(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_type54(member54,strm, #member54) && \
        serialize_##member_type55(member55,strm, #member55) && \
        serialize_##member_type56(member56,strm, #member56) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_type54(member54,strm, #member54) && \
		 deserialize_##member_type55(member55,strm, #member55) && \
		 deserialize_##member_type56(member56,strm, #member56) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_57(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(member54,strm, #member54) && \
		 serialize(member55,strm, #member55) && \
		 serialize(member56,strm, #member56) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(member54,strm, #member54) && \
		 deserialize(member55,strm, #member55) && \
		 deserialize(member56,strm, #member56) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_58(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_type55(s1.##member55,strm, #member55) && \
        serialize_##member_type56(s1.##member56,strm, #member56) && \
        serialize_##member_type57(s1.##member57,strm, #member57) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_type55(s1.##member55,strm, #member55) && \
		 deserialize_##member_type56(s1.##member56,strm, #member56) && \
		 deserialize_##member_type57(s1.##member57,strm, #member57) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_58(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##member55,strm, #member55) && \
		 serialize(s1.##member56,strm, #member56) && \
		 serialize(s1.##member57,strm, #member57) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##member55,strm, #member55) && \
		 deserialize(s1.##member56,strm, #member56) && \
		 deserialize(s1.##member57,strm, #member57) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_58(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_type54(member54,strm, #member54) && \
        serialize_##member_type55(member55,strm, #member55) && \
        serialize_##member_type56(member56,strm, #member56) && \
        serialize_##member_type57(member57,strm, #member57) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_type54(member54,strm, #member54) && \
		 deserialize_##member_type55(member55,strm, #member55) && \
		 deserialize_##member_type56(member56,strm, #member56) && \
		 deserialize_##member_type57(member57,strm, #member57) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_58(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(member54,strm, #member54) && \
		 serialize(member55,strm, #member55) && \
		 serialize(member56,strm, #member56) && \
		 serialize(member57,strm, #member57) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(member54,strm, #member54) && \
		 deserialize(member55,strm, #member55) && \
		 deserialize(member56,strm, #member56) && \
		 deserialize(member57,strm, #member57) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_59(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_type55(s1.##member55,strm, #member55) && \
        serialize_##member_type56(s1.##member56,strm, #member56) && \
        serialize_##member_type57(s1.##member57,strm, #member57) && \
        serialize_##member_type58(s1.##member58,strm, #member58) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_type55(s1.##member55,strm, #member55) && \
		 deserialize_##member_type56(s1.##member56,strm, #member56) && \
		 deserialize_##member_type57(s1.##member57,strm, #member57) && \
		 deserialize_##member_type58(s1.##member58,strm, #member58) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_59(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##member55,strm, #member55) && \
		 serialize(s1.##member56,strm, #member56) && \
		 serialize(s1.##member57,strm, #member57) && \
		 serialize(s1.##member58,strm, #member58) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##member55,strm, #member55) && \
		 deserialize(s1.##member56,strm, #member56) && \
		 deserialize(s1.##member57,strm, #member57) && \
		 deserialize(s1.##member58,strm, #member58) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_59(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_type54(member54,strm, #member54) && \
        serialize_##member_type55(member55,strm, #member55) && \
        serialize_##member_type56(member56,strm, #member56) && \
        serialize_##member_type57(member57,strm, #member57) && \
        serialize_##member_type58(member58,strm, #member58) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_type54(member54,strm, #member54) && \
		 deserialize_##member_type55(member55,strm, #member55) && \
		 deserialize_##member_type56(member56,strm, #member56) && \
		 deserialize_##member_type57(member57,strm, #member57) && \
		 deserialize_##member_type58(member58,strm, #member58) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_59(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(member54,strm, #member54) && \
		 serialize(member55,strm, #member55) && \
		 serialize(member56,strm, #member56) && \
		 serialize(member57,strm, #member57) && \
		 serialize(member58,strm, #member58) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(member54,strm, #member54) && \
		 deserialize(member55,strm, #member55) && \
		 deserialize(member56,strm, #member56) && \
		 deserialize(member57,strm, #member57) && \
		 deserialize(member58,strm, #member58) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_60(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     member59, member_type59, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_type55(s1.##member55,strm, #member55) && \
        serialize_##member_type56(s1.##member56,strm, #member56) && \
        serialize_##member_type57(s1.##member57,strm, #member57) && \
        serialize_##member_type58(s1.##member58,strm, #member58) && \
        serialize_##member_type59(s1.##member59,strm, #member59) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_type55(s1.##member55,strm, #member55) && \
		 deserialize_##member_type56(s1.##member56,strm, #member56) && \
		 deserialize_##member_type57(s1.##member57,strm, #member57) && \
		 deserialize_##member_type58(s1.##member58,strm, #member58) && \
		 deserialize_##member_type59(s1.##member59,strm, #member59) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_60(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     member59, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##member55,strm, #member55) && \
		 serialize(s1.##member56,strm, #member56) && \
		 serialize(s1.##member57,strm, #member57) && \
		 serialize(s1.##member58,strm, #member58) && \
		 serialize(s1.##member59,strm, #member59) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##member55,strm, #member55) && \
		 deserialize(s1.##member56,strm, #member56) && \
		 deserialize(s1.##member57,strm, #member57) && \
		 deserialize(s1.##member58,strm, #member58) && \
		 deserialize(s1.##member59,strm, #member59) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_60(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     member59, member_type59, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_type54(member54,strm, #member54) && \
        serialize_##member_type55(member55,strm, #member55) && \
        serialize_##member_type56(member56,strm, #member56) && \
        serialize_##member_type57(member57,strm, #member57) && \
        serialize_##member_type58(member58,strm, #member58) && \
        serialize_##member_type59(member59,strm, #member59) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_type54(member54,strm, #member54) && \
		 deserialize_##member_type55(member55,strm, #member55) && \
		 deserialize_##member_type56(member56,strm, #member56) && \
		 deserialize_##member_type57(member57,strm, #member57) && \
		 deserialize_##member_type58(member58,strm, #member58) && \
		 deserialize_##member_type59(member59,strm, #member59) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_60(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     member59, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(member54,strm, #member54) && \
		 serialize(member55,strm, #member55) && \
		 serialize(member56,strm, #member56) && \
		 serialize(member57,strm, #member57) && \
		 serialize(member58,strm, #member58) && \
		 serialize(member59,strm, #member59) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(member54,strm, #member54) && \
		 deserialize(member55,strm, #member55) && \
		 deserialize(member56,strm, #member56) && \
		 deserialize(member57,strm, #member57) && \
		 deserialize(member58,strm, #member58) && \
		 deserialize(member59,strm, #member59) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_61(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     member59, member_type59, \
                                     member60, member_type60, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_type55(s1.##member55,strm, #member55) && \
        serialize_##member_type56(s1.##member56,strm, #member56) && \
        serialize_##member_type57(s1.##member57,strm, #member57) && \
        serialize_##member_type58(s1.##member58,strm, #member58) && \
        serialize_##member_type59(s1.##member59,strm, #member59) && \
        serialize_##member_type60(s1.##member60,strm, #member60) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_type55(s1.##member55,strm, #member55) && \
		 deserialize_##member_type56(s1.##member56,strm, #member56) && \
		 deserialize_##member_type57(s1.##member57,strm, #member57) && \
		 deserialize_##member_type58(s1.##member58,strm, #member58) && \
		 deserialize_##member_type59(s1.##member59,strm, #member59) && \
		 deserialize_##member_type60(s1.##member60,strm, #member60) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_61(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     member59, \
                                     member60, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##member55,strm, #member55) && \
		 serialize(s1.##member56,strm, #member56) && \
		 serialize(s1.##member57,strm, #member57) && \
		 serialize(s1.##member58,strm, #member58) && \
		 serialize(s1.##member59,strm, #member59) && \
		 serialize(s1.##member60,strm, #member60) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##member55,strm, #member55) && \
		 deserialize(s1.##member56,strm, #member56) && \
		 deserialize(s1.##member57,strm, #member57) && \
		 deserialize(s1.##member58,strm, #member58) && \
		 deserialize(s1.##member59,strm, #member59) && \
		 deserialize(s1.##member60,strm, #member60) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_61(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     member59, member_type59, \
                                     member60, member_type60, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_type54(member54,strm, #member54) && \
        serialize_##member_type55(member55,strm, #member55) && \
        serialize_##member_type56(member56,strm, #member56) && \
        serialize_##member_type57(member57,strm, #member57) && \
        serialize_##member_type58(member58,strm, #member58) && \
        serialize_##member_type59(member59,strm, #member59) && \
        serialize_##member_type60(member60,strm, #member60) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_type54(member54,strm, #member54) && \
		 deserialize_##member_type55(member55,strm, #member55) && \
		 deserialize_##member_type56(member56,strm, #member56) && \
		 deserialize_##member_type57(member57,strm, #member57) && \
		 deserialize_##member_type58(member58,strm, #member58) && \
		 deserialize_##member_type59(member59,strm, #member59) && \
		 deserialize_##member_type60(member60,strm, #member60) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_61(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     member59, \
                                     member60, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(member54,strm, #member54) && \
		 serialize(member55,strm, #member55) && \
		 serialize(member56,strm, #member56) && \
		 serialize(member57,strm, #member57) && \
		 serialize(member58,strm, #member58) && \
		 serialize(member59,strm, #member59) && \
		 serialize(member60,strm, #member60) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(member54,strm, #member54) && \
		 deserialize(member55,strm, #member55) && \
		 deserialize(member56,strm, #member56) && \
		 deserialize(member57,strm, #member57) && \
		 deserialize(member58,strm, #member58) && \
		 deserialize(member59,strm, #member59) && \
		 deserialize(member60,strm, #member60) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_62(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     member59, member_type59, \
                                     member60, member_type60, \
                                     member61, member_type61, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_type55(s1.##member55,strm, #member55) && \
        serialize_##member_type56(s1.##member56,strm, #member56) && \
        serialize_##member_type57(s1.##member57,strm, #member57) && \
        serialize_##member_type58(s1.##member58,strm, #member58) && \
        serialize_##member_type59(s1.##member59,strm, #member59) && \
        serialize_##member_type60(s1.##member60,strm, #member60) && \
        serialize_##member_type61(s1.##member61,strm, #member61) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_type55(s1.##member55,strm, #member55) && \
		 deserialize_##member_type56(s1.##member56,strm, #member56) && \
		 deserialize_##member_type57(s1.##member57,strm, #member57) && \
		 deserialize_##member_type58(s1.##member58,strm, #member58) && \
		 deserialize_##member_type59(s1.##member59,strm, #member59) && \
		 deserialize_##member_type60(s1.##member60,strm, #member60) && \
		 deserialize_##member_type61(s1.##member61,strm, #member61) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_62(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     member59, \
                                     member60, \
                                     member61, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##member55,strm, #member55) && \
		 serialize(s1.##member56,strm, #member56) && \
		 serialize(s1.##member57,strm, #member57) && \
		 serialize(s1.##member58,strm, #member58) && \
		 serialize(s1.##member59,strm, #member59) && \
		 serialize(s1.##member60,strm, #member60) && \
		 serialize(s1.##member61,strm, #member61) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##member55,strm, #member55) && \
		 deserialize(s1.##member56,strm, #member56) && \
		 deserialize(s1.##member57,strm, #member57) && \
		 deserialize(s1.##member58,strm, #member58) && \
		 deserialize(s1.##member59,strm, #member59) && \
		 deserialize(s1.##member60,strm, #member60) && \
		 deserialize(s1.##member61,strm, #member61) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 

#define register_class2_v1_62(class_, base_, \
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     member59, member_type59, \
                                     member60, member_type60, \
                                     member61, member_type61, \
                                     membern, member_typen) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag, const tchar* name) const \
     { return (!flag || strm.open(name)) && \
        serialize_##member_type1(member1,strm, #member1) && \
        serialize_##member_type2(member2,strm, #member2) && \
        serialize_##member_type3(member3,strm, #member3) && \
        serialize_##member_type4(member4,strm, #member4) && \
        serialize_##member_type5(member5,strm, #member5) && \
        serialize_##member_type6(member6,strm, #member6) && \
        serialize_##member_type7(member7,strm, #member7) && \
        serialize_##member_type8(member8,strm, #member8) && \
        serialize_##member_type9(member9,strm, #member9) && \
        serialize_##member_type10(member10,strm, #member10) && \
        serialize_##member_type11(member11,strm, #member11) && \
        serialize_##member_type12(member12,strm, #member12) && \
        serialize_##member_type13(member13,strm, #member13) && \
        serialize_##member_type14(member14,strm, #member14) && \
        serialize_##member_type15(member15,strm, #member15) && \
        serialize_##member_type16(member16,strm, #member16) && \
        serialize_##member_type17(member17,strm, #member17) && \
        serialize_##member_type18(member18,strm, #member18) && \
        serialize_##member_type19(member19,strm, #member19) && \
        serialize_##member_type20(member20,strm, #member20) && \
        serialize_##member_type21(member21,strm, #member21) && \
        serialize_##member_type22(member22,strm, #member22) && \
        serialize_##member_type23(member23,strm, #member23) && \
        serialize_##member_type24(member24,strm, #member24) && \
        serialize_##member_type25(member25,strm, #member25) && \
        serialize_##member_type26(member26,strm, #member26) && \
        serialize_##member_type27(member27,strm, #member27) && \
        serialize_##member_type28(member28,strm, #member28) && \
        serialize_##member_type29(member29,strm, #member29) && \
        serialize_##member_type30(member30,strm, #member30) && \
        serialize_##member_type31(member31,strm, #member31) && \
        serialize_##member_type32(member32,strm, #member32) && \
        serialize_##member_type33(member33,strm, #member33) && \
        serialize_##member_type34(member34,strm, #member34) && \
        serialize_##member_type35(member35,strm, #member35) && \
        serialize_##member_type36(member36,strm, #member36) && \
        serialize_##member_type37(member37,strm, #member37) && \
        serialize_##member_type38(member38,strm, #member38) && \
        serialize_##member_type39(member39,strm, #member39) && \
        serialize_##member_type40(member40,strm, #member40) && \
        serialize_##member_type41(member41,strm, #member41) && \
        serialize_##member_type42(member42,strm, #member42) && \
        serialize_##member_type43(member43,strm, #member43) && \
        serialize_##member_type44(member44,strm, #member44) && \
        serialize_##member_type45(member45,strm, #member45) && \
        serialize_##member_type46(member46,strm, #member46) && \
        serialize_##member_type47(member47,strm, #member47) && \
        serialize_##member_type48(member48,strm, #member48) && \
        serialize_##member_type49(member49,strm, #member49) && \
        serialize_##member_type50(member50,strm, #member50) && \
        serialize_##member_type51(member51,strm, #member51) && \
        serialize_##member_type52(member52,strm, #member52) && \
        serialize_##member_type53(member53,strm, #member53) && \
        serialize_##member_type54(member54,strm, #member54) && \
        serialize_##member_type55(member55,strm, #member55) && \
        serialize_##member_type56(member56,strm, #member56) && \
        serialize_##member_type57(member57,strm, #member57) && \
        serialize_##member_type58(member58,strm, #member58) && \
        serialize_##member_type59(member59,strm, #member59) && \
        serialize_##member_type60(member60,strm, #member60) && \
        serialize_##member_type61(member61,strm, #member61) && \
        serialize_##member_typen(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write(strm, true, name);} \
    bool inline serialize_##class_(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return serialize(s1, strm, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize_##member_type1(member1,strm, #member1) && \
		 deserialize_##member_type2(member2,strm, #member2) && \
		 deserialize_##member_type3(member3,strm, #member3) && \
		 deserialize_##member_type4(member4,strm, #member4) && \
		 deserialize_##member_type5(member5,strm, #member5) && \
		 deserialize_##member_type6(member6,strm, #member6) && \
		 deserialize_##member_type7(member7,strm, #member7) && \
		 deserialize_##member_type8(member8,strm, #member8) && \
		 deserialize_##member_type9(member9,strm, #member9) && \
		 deserialize_##member_type10(member10,strm, #member10) && \
		 deserialize_##member_type11(member11,strm, #member11) && \
		 deserialize_##member_type12(member12,strm, #member12) && \
		 deserialize_##member_type13(member13,strm, #member13) && \
		 deserialize_##member_type14(member14,strm, #member14) && \
		 deserialize_##member_type15(member15,strm, #member15) && \
		 deserialize_##member_type16(member16,strm, #member16) && \
		 deserialize_##member_type17(member17,strm, #member17) && \
		 deserialize_##member_type18(member18,strm, #member18) && \
		 deserialize_##member_type19(member19,strm, #member19) && \
		 deserialize_##member_type20(member20,strm, #member20) && \
		 deserialize_##member_type21(member21,strm, #member21) && \
		 deserialize_##member_type22(member22,strm, #member22) && \
		 deserialize_##member_type23(member23,strm, #member23) && \
		 deserialize_##member_type24(member24,strm, #member24) && \
		 deserialize_##member_type25(member25,strm, #member25) && \
		 deserialize_##member_type26(member26,strm, #member26) && \
		 deserialize_##member_type27(member27,strm, #member27) && \
		 deserialize_##member_type28(member28,strm, #member28) && \
		 deserialize_##member_type29(member29,strm, #member29) && \
		 deserialize_##member_type30(member30,strm, #member30) && \
		 deserialize_##member_type31(member31,strm, #member31) && \
		 deserialize_##member_type32(member32,strm, #member32) && \
		 deserialize_##member_type33(member33,strm, #member33) && \
		 deserialize_##member_type34(member34,strm, #member34) && \
		 deserialize_##member_type35(member35,strm, #member35) && \
		 deserialize_##member_type36(member36,strm, #member36) && \
		 deserialize_##member_type37(member37,strm, #member37) && \
		 deserialize_##member_type38(member38,strm, #member38) && \
		 deserialize_##member_type39(member39,strm, #member39) && \
		 deserialize_##member_type40(member40,strm, #member40) && \
		 deserialize_##member_type41(member41,strm, #member41) && \
		 deserialize_##member_type42(member42,strm, #member42) && \
		 deserialize_##member_type43(member43,strm, #member43) && \
		 deserialize_##member_type44(member44,strm, #member44) && \
		 deserialize_##member_type45(member45,strm, #member45) && \
		 deserialize_##member_type46(member46,strm, #member46) && \
		 deserialize_##member_type47(member47,strm, #member47) && \
		 deserialize_##member_type48(member48,strm, #member48) && \
		 deserialize_##member_type49(member49,strm, #member49) && \
		 deserialize_##member_type50(member50,strm, #member50) && \
		 deserialize_##member_type51(member51,strm, #member51) && \
		 deserialize_##member_type52(member52,strm, #member52) && \
		 deserialize_##member_type53(member53,strm, #member53) && \
		 deserialize_##member_type54(member54,strm, #member54) && \
		 deserialize_##member_type55(member55,strm, #member55) && \
		 deserialize_##member_type56(member56,strm, #member56) && \
		 deserialize_##member_type57(member57,strm, #member57) && \
		 deserialize_##member_type58(member58,strm, #member58) && \
		 deserialize_##member_type59(member59,strm, #member59) && \
		 deserialize_##member_type60(member60,strm, #member60) && \
		 deserialize_##member_type61(member61,strm, #member61) && \
		 deserialize_##member_typen(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}\
    bool inline deserialize_##class_(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return deserialize(s1, strm, name);}

#define register_class2_v2_62(class_, base_, \
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     member59, \
                                     member60, \
                                     member61, \
                                     membern) \
    bool inline class_::write(serialize_ostream_base& strm, const bool flag , const tchar* name) const \
         { return (!flag || strm.open(name)) && \
		 serialize(member1,strm, #member1) && \
		 serialize(member2,strm, #member2) && \
		 serialize(member3,strm, #member3) && \
		 serialize(member4,strm, #member4) && \
		 serialize(member5,strm, #member5) && \
		 serialize(member6,strm, #member6) && \
		 serialize(member7,strm, #member7) && \
		 serialize(member8,strm, #member8) && \
		 serialize(member9,strm, #member9) && \
		 serialize(member10,strm, #member10) && \
		 serialize(member11,strm, #member11) && \
		 serialize(member12,strm, #member12) && \
		 serialize(member13,strm, #member13) && \
		 serialize(member14,strm, #member14) && \
		 serialize(member15,strm, #member15) && \
		 serialize(member16,strm, #member16) && \
		 serialize(member17,strm, #member17) && \
		 serialize(member18,strm, #member18) && \
		 serialize(member19,strm, #member19) && \
		 serialize(member20,strm, #member20) && \
		 serialize(member21,strm, #member21) && \
		 serialize(member22,strm, #member22) && \
		 serialize(member23,strm, #member23) && \
		 serialize(member24,strm, #member24) && \
		 serialize(member25,strm, #member25) && \
		 serialize(member26,strm, #member26) && \
		 serialize(member27,strm, #member27) && \
		 serialize(member28,strm, #member28) && \
		 serialize(member29,strm, #member29) && \
		 serialize(member30,strm, #member30) && \
		 serialize(member31,strm, #member31) && \
		 serialize(member32,strm, #member32) && \
		 serialize(member33,strm, #member33) && \
		 serialize(member34,strm, #member34) && \
		 serialize(member35,strm, #member35) && \
		 serialize(member36,strm, #member36) && \
		 serialize(member37,strm, #member37) && \
		 serialize(member38,strm, #member38) && \
		 serialize(member39,strm, #member39) && \
		 serialize(member40,strm, #member40) && \
		 serialize(member41,strm, #member41) && \
		 serialize(member42,strm, #member42) && \
		 serialize(member43,strm, #member43) && \
		 serialize(member44,strm, #member44) && \
		 serialize(member45,strm, #member45) && \
		 serialize(member46,strm, #member46) && \
		 serialize(member47,strm, #member47) && \
		 serialize(member48,strm, #member48) && \
		 serialize(member49,strm, #member49) && \
		 serialize(member50,strm, #member50) && \
		 serialize(member51,strm, #member51) && \
		 serialize(member52,strm, #member52) && \
		 serialize(member53,strm, #member53) && \
		 serialize(member54,strm, #member54) && \
		 serialize(member55,strm, #member55) && \
		 serialize(member56,strm, #member56) && \
		 serialize(member57,strm, #member57) && \
		 serialize(member58,strm, #member58) && \
		 serialize(member59,strm, #member59) && \
		 serialize(member60,strm, #member60) && \
		 serialize(member61,strm, #member61) && \
		 serialize(membern,strm, #membern)&& \
        base_::write(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name=#class_) \
         { return s1.write( strm, true, name);} \
    bool inline class_::read(serialize_istream_base& strm, const bool flag , const tchar* name) \
         { return (!flag||strm.open(name)) && \
		 deserialize(member1,strm, #member1) && \
		 deserialize(member2,strm, #member2) && \
		 deserialize(member3,strm, #member3) && \
		 deserialize(member4,strm, #member4) && \
		 deserialize(member5,strm, #member5) && \
		 deserialize(member6,strm, #member6) && \
		 deserialize(member7,strm, #member7) && \
		 deserialize(member8,strm, #member8) && \
		 deserialize(member9,strm, #member9) && \
		 deserialize(member10,strm, #member10) && \
		 deserialize(member11,strm, #member11) && \
		 deserialize(member12,strm, #member12) && \
		 deserialize(member13,strm, #member13) && \
		 deserialize(member14,strm, #member14) && \
		 deserialize(member15,strm, #member15) && \
		 deserialize(member16,strm, #member16) && \
		 deserialize(member17,strm, #member17) && \
		 deserialize(member18,strm, #member18) && \
		 deserialize(member19,strm, #member19) && \
		 deserialize(member20,strm, #member20) && \
		 deserialize(member21,strm, #member21) && \
		 deserialize(member22,strm, #member22) && \
		 deserialize(member23,strm, #member23) && \
		 deserialize(member24,strm, #member24) && \
		 deserialize(member25,strm, #member25) && \
		 deserialize(member26,strm, #member26) && \
		 deserialize(member27,strm, #member27) && \
		 deserialize(member28,strm, #member28) && \
		 deserialize(member29,strm, #member29) && \
		 deserialize(member30,strm, #member30) && \
		 deserialize(member31,strm, #member31) && \
		 deserialize(member32,strm, #member32) && \
		 deserialize(member33,strm, #member33) && \
		 deserialize(member34,strm, #member34) && \
		 deserialize(member35,strm, #member35) && \
		 deserialize(member36,strm, #member36) && \
		 deserialize(member37,strm, #member37) && \
		 deserialize(member38,strm, #member38) && \
		 deserialize(member39,strm, #member39) && \
		 deserialize(member40,strm, #member40) && \
		 deserialize(member41,strm, #member41) && \
		 deserialize(member42,strm, #member42) && \
		 deserialize(member43,strm, #member43) && \
		 deserialize(member44,strm, #member44) && \
		 deserialize(member45,strm, #member45) && \
		 deserialize(member46,strm, #member46) && \
		 deserialize(member47,strm, #member47) && \
		 deserialize(member48,strm, #member48) && \
		 deserialize(member49,strm, #member49) && \
		 deserialize(member50,strm, #member50) && \
		 deserialize(member51,strm, #member51) && \
		 deserialize(member52,strm, #member52) && \
		 deserialize(member53,strm, #member53) && \
		 deserialize(member54,strm, #member54) && \
		 deserialize(member55,strm, #member55) && \
		 deserialize(member56,strm, #member56) && \
		 deserialize(member57,strm, #member57) && \
		 deserialize(member58,strm, #member58) && \
		 deserialize(member59,strm, #member59) && \
		 deserialize(member60,strm, #member60) && \
		 deserialize(member61,strm, #member61) && \
		 deserialize(membern,strm, #membern) && \
        base_::read(strm,false)&& \
        (!flag || strm.close(name)); } \
    bool inline deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name=#class_) \
        { return s1.read(strm, true, name);}



#define register_serialize2_v1_63(Struct,\
                                     member1, member_type1, \
                                     member2, member_type2, \
                                     member3, member_type3, \
                                     member4, member_type4, \
                                     member5, member_type5, \
                                     member6, member_type6, \
                                     member7, member_type7, \
                                     member8, member_type8, \
                                     member9, member_type9, \
                                     member10, member_type10, \
                                     member11, member_type11, \
                                     member12, member_type12, \
                                     member13, member_type13, \
                                     member14, member_type14, \
                                     member15, member_type15, \
                                     member16, member_type16, \
                                     member17, member_type17, \
                                     member18, member_type18, \
                                     member19, member_type19, \
                                     member20, member_type20, \
                                     member21, member_type21, \
                                     member22, member_type22, \
                                     member23, member_type23, \
                                     member24, member_type24, \
                                     member25, member_type25, \
                                     member26, member_type26, \
                                     member27, member_type27, \
                                     member28, member_type28, \
                                     member29, member_type29, \
                                     member30, member_type30, \
                                     member31, member_type31, \
                                     member32, member_type32, \
                                     member33, member_type33, \
                                     member34, member_type34, \
                                     member35, member_type35, \
                                     member36, member_type36, \
                                     member37, member_type37, \
                                     member38, member_type38, \
                                     member39, member_type39, \
                                     member40, member_type40, \
                                     member41, member_type41, \
                                     member42, member_type42, \
                                     member43, member_type43, \
                                     member44, member_type44, \
                                     member45, member_type45, \
                                     member46, member_type46, \
                                     member47, member_type47, \
                                     member48, member_type48, \
                                     member49, member_type49, \
                                     member50, member_type50, \
                                     member51, member_type51, \
                                     member52, member_type52, \
                                     member53, member_type53, \
                                     member54, member_type54, \
                                     member55, member_type55, \
                                     member56, member_type56, \
                                     member57, member_type57, \
                                     member58, member_type58, \
                                     member59, member_type59, \
                                     member60, member_type60, \
                                     member61, member_type61, \
                                     member62, member_type62, \
                                     membern, member_typen) \
    bool inline serialize_##Struct(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
     { return strm.open(name) && \
        serialize_##member_type1(s1.##member1,strm, #member1) && \
        serialize_##member_type2(s1.##member2,strm, #member2) && \
        serialize_##member_type3(s1.##member3,strm, #member3) && \
        serialize_##member_type4(s1.##member4,strm, #member4) && \
        serialize_##member_type5(s1.##member5,strm, #member5) && \
        serialize_##member_type6(s1.##member6,strm, #member6) && \
        serialize_##member_type7(s1.##member7,strm, #member7) && \
        serialize_##member_type8(s1.##member8,strm, #member8) && \
        serialize_##member_type9(s1.##member9,strm, #member9) && \
        serialize_##member_type10(s1.##member10,strm, #member10) && \
        serialize_##member_type11(s1.##member11,strm, #member11) && \
        serialize_##member_type12(s1.##member12,strm, #member12) && \
        serialize_##member_type13(s1.##member13,strm, #member13) && \
        serialize_##member_type14(s1.##member14,strm, #member14) && \
        serialize_##member_type15(s1.##member15,strm, #member15) && \
        serialize_##member_type16(s1.##member16,strm, #member16) && \
        serialize_##member_type17(s1.##member17,strm, #member17) && \
        serialize_##member_type18(s1.##member18,strm, #member18) && \
        serialize_##member_type19(s1.##member19,strm, #member19) && \
        serialize_##member_type20(s1.##member20,strm, #member20) && \
        serialize_##member_type21(s1.##member21,strm, #member21) && \
        serialize_##member_type22(s1.##member22,strm, #member22) && \
        serialize_##member_type23(s1.##member23,strm, #member23) && \
        serialize_##member_type24(s1.##member24,strm, #member24) && \
        serialize_##member_type25(s1.##member25,strm, #member25) && \
        serialize_##member_type26(s1.##member26,strm, #member26) && \
        serialize_##member_type27(s1.##member27,strm, #member27) && \
        serialize_##member_type28(s1.##member28,strm, #member28) && \
        serialize_##member_type29(s1.##member29,strm, #member29) && \
        serialize_##member_type30(s1.##member30,strm, #member30) && \
        serialize_##member_type31(s1.##member31,strm, #member31) && \
        serialize_##member_type32(s1.##member32,strm, #member32) && \
        serialize_##member_type33(s1.##member33,strm, #member33) && \
        serialize_##member_type34(s1.##member34,strm, #member34) && \
        serialize_##member_type35(s1.##member35,strm, #member35) && \
        serialize_##member_type36(s1.##member36,strm, #member36) && \
        serialize_##member_type37(s1.##member37,strm, #member37) && \
        serialize_##member_type38(s1.##member38,strm, #member38) && \
        serialize_##member_type39(s1.##member39,strm, #member39) && \
        serialize_##member_type40(s1.##member40,strm, #member40) && \
        serialize_##member_type41(s1.##member41,strm, #member41) && \
        serialize_##member_type42(s1.##member42,strm, #member42) && \
        serialize_##member_type43(s1.##member43,strm, #member43) && \
        serialize_##member_type44(s1.##member44,strm, #member44) && \
        serialize_##member_type45(s1.##member45,strm, #member45) && \
        serialize_##member_type46(s1.##member46,strm, #member46) && \
        serialize_##member_type47(s1.##member47,strm, #member47) && \
        serialize_##member_type48(s1.##member48,strm, #member48) && \
        serialize_##member_type49(s1.##member49,strm, #member49) && \
        serialize_##member_type50(s1.##member50,strm, #member50) && \
        serialize_##member_type51(s1.##member51,strm, #member51) && \
        serialize_##member_type52(s1.##member52,strm, #member52) && \
        serialize_##member_type53(s1.##member53,strm, #member53) && \
        serialize_##member_type54(s1.##member54,strm, #member54) && \
        serialize_##member_type55(s1.##member55,strm, #member55) && \
        serialize_##member_type56(s1.##member56,strm, #member56) && \
        serialize_##member_type57(s1.##member57,strm, #member57) && \
        serialize_##member_type58(s1.##member58,strm, #member58) && \
        serialize_##member_type59(s1.##member59,strm, #member59) && \
        serialize_##member_type60(s1.##member60,strm, #member60) && \
        serialize_##member_type61(s1.##member61,strm, #member61) && \
        serialize_##member_type62(s1.##member62,strm, #member62) && \
        serialize_##member_typen(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return serialize_##Struct(s1, strm, name);} \
    bool inline deserialize_##Struct(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize_##member_type1(s1.##member1,strm, #member1) && \
		 deserialize_##member_type2(s1.##member2,strm, #member2) && \
		 deserialize_##member_type3(s1.##member3,strm, #member3) && \
		 deserialize_##member_type4(s1.##member4,strm, #member4) && \
		 deserialize_##member_type5(s1.##member5,strm, #member5) && \
		 deserialize_##member_type6(s1.##member6,strm, #member6) && \
		 deserialize_##member_type7(s1.##member7,strm, #member7) && \
		 deserialize_##member_type8(s1.##member8,strm, #member8) && \
		 deserialize_##member_type9(s1.##member9,strm, #member9) && \
		 deserialize_##member_type10(s1.##member10,strm, #member10) && \
		 deserialize_##member_type11(s1.##member11,strm, #member11) && \
		 deserialize_##member_type12(s1.##member12,strm, #member12) && \
		 deserialize_##member_type13(s1.##member13,strm, #member13) && \
		 deserialize_##member_type14(s1.##member14,strm, #member14) && \
		 deserialize_##member_type15(s1.##member15,strm, #member15) && \
		 deserialize_##member_type16(s1.##member16,strm, #member16) && \
		 deserialize_##member_type17(s1.##member17,strm, #member17) && \
		 deserialize_##member_type18(s1.##member18,strm, #member18) && \
		 deserialize_##member_type19(s1.##member19,strm, #member19) && \
		 deserialize_##member_type20(s1.##member20,strm, #member20) && \
		 deserialize_##member_type21(s1.##member21,strm, #member21) && \
		 deserialize_##member_type22(s1.##member22,strm, #member22) && \
		 deserialize_##member_type23(s1.##member23,strm, #member23) && \
		 deserialize_##member_type24(s1.##member24,strm, #member24) && \
		 deserialize_##member_type25(s1.##member25,strm, #member25) && \
		 deserialize_##member_type26(s1.##member26,strm, #member26) && \
		 deserialize_##member_type27(s1.##member27,strm, #member27) && \
		 deserialize_##member_type28(s1.##member28,strm, #member28) && \
		 deserialize_##member_type29(s1.##member29,strm, #member29) && \
		 deserialize_##member_type30(s1.##member30,strm, #member30) && \
		 deserialize_##member_type31(s1.##member31,strm, #member31) && \
		 deserialize_##member_type32(s1.##member32,strm, #member32) && \
		 deserialize_##member_type33(s1.##member33,strm, #member33) && \
		 deserialize_##member_type34(s1.##member34,strm, #member34) && \
		 deserialize_##member_type35(s1.##member35,strm, #member35) && \
		 deserialize_##member_type36(s1.##member36,strm, #member36) && \
		 deserialize_##member_type37(s1.##member37,strm, #member37) && \
		 deserialize_##member_type38(s1.##member38,strm, #member38) && \
		 deserialize_##member_type39(s1.##member39,strm, #member39) && \
		 deserialize_##member_type40(s1.##member40,strm, #member40) && \
		 deserialize_##member_type41(s1.##member41,strm, #member41) && \
		 deserialize_##member_type42(s1.##member42,strm, #member42) && \
		 deserialize_##member_type43(s1.##member43,strm, #member43) && \
		 deserialize_##member_type44(s1.##member44,strm, #member44) && \
		 deserialize_##member_type45(s1.##member45,strm, #member45) && \
		 deserialize_##member_type46(s1.##member46,strm, #member46) && \
		 deserialize_##member_type47(s1.##member47,strm, #member47) && \
		 deserialize_##member_type48(s1.##member48,strm, #member48) && \
		 deserialize_##member_type49(s1.##member49,strm, #member49) && \
		 deserialize_##member_type50(s1.##member50,strm, #member50) && \
		 deserialize_##member_type51(s1.##member51,strm, #member51) && \
		 deserialize_##member_type52(s1.##member52,strm, #member52) && \
		 deserialize_##member_type53(s1.##member53,strm, #member53) && \
		 deserialize_##member_type54(s1.##member54,strm, #member54) && \
		 deserialize_##member_type55(s1.##member55,strm, #member55) && \
		 deserialize_##member_type56(s1.##member56,strm, #member56) && \
		 deserialize_##member_type57(s1.##member57,strm, #member57) && \
		 deserialize_##member_type58(s1.##member58,strm, #member58) && \
		 deserialize_##member_type59(s1.##member59,strm, #member59) && \
		 deserialize_##member_type60(s1.##member60,strm, #member60) && \
		 deserialize_##member_type61(s1.##member61,strm, #member61) && \
		 deserialize_##member_type62(s1.##member62,strm, #member62) && \
		 deserialize_##member_typen(s1.##membern,strm, #membern) && \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
        { return deserialize_##Struct(s1, strm, name);}

#define register_serialize2_v2_63(Struct,\
                                     member1, \
                                     member2, \
                                     member3, \
                                     member4, \
                                     member5, \
                                     member6, \
                                     member7, \
                                     member8, \
                                     member9, \
                                     member10, \
                                     member11, \
                                     member12, \
                                     member13, \
                                     member14, \
                                     member15, \
                                     member16, \
                                     member17, \
                                     member18, \
                                     member19, \
                                     member20, \
                                     member21, \
                                     member22, \
                                     member23, \
                                     member24, \
                                     member25, \
                                     member26, \
                                     member27, \
                                     member28, \
                                     member29, \
                                     member30, \
                                     member31, \
                                     member32, \
                                     member33, \
                                     member34, \
                                     member35, \
                                     member36, \
                                     member37, \
                                     member38, \
                                     member39, \
                                     member40, \
                                     member41, \
                                     member42, \
                                     member43, \
                                     member44, \
                                     member45, \
                                     member46, \
                                     member47, \
                                     member48, \
                                     member49, \
                                     member50, \
                                     member51, \
                                     member52, \
                                     member53, \
                                     member54, \
                                     member55, \
                                     member56, \
                                     member57, \
                                     member58, \
                                     member59, \
                                     member60, \
                                     member61, \
                                     member62, \
                                     membern) \
    bool inline serialize(const Struct & s1, _bt serialize_ostream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 serialize(s1.##member1,strm, #member1) && \
		 serialize(s1.##member2,strm, #member2) && \
		 serialize(s1.##member3,strm, #member3) && \
		 serialize(s1.##member4,strm, #member4) && \
		 serialize(s1.##member5,strm, #member5) && \
		 serialize(s1.##member6,strm, #member6) && \
		 serialize(s1.##member7,strm, #member7) && \
		 serialize(s1.##member8,strm, #member8) && \
		 serialize(s1.##member9,strm, #member9) && \
		 serialize(s1.##member10,strm, #member10) && \
		 serialize(s1.##member11,strm, #member11) && \
		 serialize(s1.##member12,strm, #member12) && \
		 serialize(s1.##member13,strm, #member13) && \
		 serialize(s1.##member14,strm, #member14) && \
		 serialize(s1.##member15,strm, #member15) && \
		 serialize(s1.##member16,strm, #member16) && \
		 serialize(s1.##member17,strm, #member17) && \
		 serialize(s1.##member18,strm, #member18) && \
		 serialize(s1.##member19,strm, #member19) && \
		 serialize(s1.##member20,strm, #member20) && \
		 serialize(s1.##member21,strm, #member21) && \
		 serialize(s1.##member22,strm, #member22) && \
		 serialize(s1.##member23,strm, #member23) && \
		 serialize(s1.##member24,strm, #member24) && \
		 serialize(s1.##member25,strm, #member25) && \
		 serialize(s1.##member26,strm, #member26) && \
		 serialize(s1.##member27,strm, #member27) && \
		 serialize(s1.##member28,strm, #member28) && \
		 serialize(s1.##member29,strm, #member29) && \
		 serialize(s1.##member30,strm, #member30) && \
		 serialize(s1.##member31,strm, #member31) && \
		 serialize(s1.##member32,strm, #member32) && \
		 serialize(s1.##member33,strm, #member33) && \
		 serialize(s1.##member34,strm, #member34) && \
		 serialize(s1.##member35,strm, #member35) && \
		 serialize(s1.##member36,strm, #member36) && \
		 serialize(s1.##member37,strm, #member37) && \
		 serialize(s1.##member38,strm, #member38) && \
		 serialize(s1.##member39,strm, #member39) && \
		 serialize(s1.##member40,strm, #member40) && \
		 serialize(s1.##member41,strm, #member41) && \
		 serialize(s1.##member42,strm, #member42) && \
		 serialize(s1.##member43,strm, #member43) && \
		 serialize(s1.##member44,strm, #member44) && \
		 serialize(s1.##member45,strm, #member45) && \
		 serialize(s1.##member46,strm, #member46) && \
		 serialize(s1.##member47,strm, #member47) && \
		 serialize(s1.##member48,strm, #member48) && \
		 serialize(s1.##member49,strm, #member49) && \
		 serialize(s1.##member50,strm, #member50) && \
		 serialize(s1.##member51,strm, #member51) && \
		 serialize(s1.##member52,strm, #member52) && \
		 serialize(s1.##member53,strm, #member53) && \
		 serialize(s1.##member54,strm, #member54) && \
		 serialize(s1.##member55,strm, #member55) && \
		 serialize(s1.##member56,strm, #member56) && \
		 serialize(s1.##member57,strm, #member57) && \
		 serialize(s1.##member58,strm, #member58) && \
		 serialize(s1.##member59,strm, #member59) && \
		 serialize(s1.##member60,strm, #member60) && \
		 serialize(s1.##member61,strm, #member61) && \
		 serialize(s1.##member62,strm, #member62) && \
		 serialize(s1.##membern,strm, #membern)&& \
        strm.close(name); } \
    bool inline deserialize(Struct & s1, _bt serialize_istream_base& strm, const tchar* name=#Struct) \
         { return strm.open(name) && \
		 deserialize(s1.##member1,strm, #member1) && \
		 deserialize(s1.##member2,strm, #member2) && \
		 deserialize(s1.##member3,strm, #member3) && \
		 deserialize(s1.##member4,strm, #member4) && \
		 deserialize(s1.##member5,strm, #member5) && \
		 deserialize(s1.##member6,strm, #member6) && \
		 deserialize(s1.##member7,strm, #member7) && \
		 deserialize(s1.##member8,strm, #member8) && \
		 deserialize(s1.##member9,strm, #member9) && \
		 deserialize(s1.##member10,strm, #member10) && \
		 deserialize(s1.##member11,strm, #member11) && \
		 deserialize(s1.##member12,strm, #member12) && \
		 deserialize(s1.##member13,strm, #member13) && \
		 deserialize(s1.##member14,strm, #member14) && \
		 deserialize(s1.##member15,strm, #member15) && \
		 deserialize(s1.##member16,strm, #member16) && \
		 deserialize(s1.##member17,strm, #member17) && \
		 deserialize(s1.##member18,strm, #member18) && \
		 deserialize(s1.##member19,strm, #member19) && \
		 deserialize(s1.##member20,strm, #member20) && \
		 deserialize(s1.##member21,strm, #member21) && \
		 deserialize(s1.##member22,strm, #member22) && \
		 deserialize(s1.##member23,strm, #member23) && \
		 deserialize(s1.##member24,strm, #member24) && \
		 deserialize(s1.##member25,strm, #member25) && \
		 deserialize(s1.##member26,strm, #member26) && \
		 deserialize(s1.##member27,strm, #member27) && \
		 deserialize(s1.##member28,strm, #member28) && \
		 deserialize(s1.##member29,strm, #member29) && \
		 deserialize(s1.##member30,strm, #member30) && \
		 deserialize(s1.##member31,strm, #member31) && \
		 deserialize(s1.##member32,strm, #member32) && \
		 deserialize(s1.##member33,strm, #member33) && \
		 deserialize(s1.##member34,strm, #member34) && \
		 deserialize(s1.##member35,strm, #member35) && \
		 deserialize(s1.##member36,strm, #member36) && \
		 deserialize(s1.##member37,strm, #member37) && \
		 deserialize(s1.##member38,strm, #member38) && \
		 deserialize(s1.##member39,strm, #member39) && \
		 deserialize(s1.##member40,strm, #member40) && \
		 deserialize(s1.##member41,strm, #member41) && \
		 deserialize(s1.##member42,strm, #member42) && \
		 deserialize(s1.##member43,strm, #member43) && \
		 deserialize(s1.##member44,strm, #member44) && \
		 deserialize(s1.##member45,strm, #member45) && \
		 deserialize(s1.##member46,strm, #member46) && \
		 deserialize(s1.##member47,strm, #member47) && \
		 deserialize(s1.##member48,strm, #member48) && \
		 deserialize(s1.##member49,strm, #member49) && \
		 deserialize(s1.##member50,strm, #member50) && \
		 deserialize(s1.##member51,strm, #member51) && \
		 deserialize(s1.##member52,strm, #member52) && \
		 deserialize(s1.##member53,strm, #member53) && \
		 deserialize(s1.##member54,strm, #member54) && \
		 deserialize(s1.##member55,strm, #member55) && \
		 deserialize(s1.##member56,strm, #member56) && \
		 deserialize(s1.##member57,strm, #member57) && \
		 deserialize(s1.##member58,strm, #member58) && \
		 deserialize(s1.##member59,strm, #member59) && \
		 deserialize(s1.##member60,strm, #member60) && \
		 deserialize(s1.##member61,strm, #member61) && \
		 deserialize(s1.##member62,strm, #member62) && \
		 deserialize(s1.##membern,strm, #membern) && \
        strm.close(name); } 


#define declare_friend_serialize2(class_) \
    friend  bool serialize(const class_ & s1, _bt serialize_ostream_base& strm, const tchar* name/*=#class_*/); \
    friend  bool deserialize(class_ & s1, _bt serialize_istream_base& strm, const tchar* name/*=#class_*/); 


#define declare_serialize2(class_)\
    virtual bool write(serialize_ostream_base& strm, const bool flag = true, const tchar* name=#class_) const; \
	virtual bool read(serialize_istream_base& strm, const bool flag = true, const tchar* name=#class_); \
	declare_friend_serialize2(class_);





#endif // _serialize2_H_
